<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Errors & Logging â€“ </title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="github-pandoc.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="../../laravel-docs/site.js"></script>
</head>
<body>
<aside><h1>Laravel 5.2 offline docs</h1><ul id="navigation">
<li><a href="artisan.html">Artisan Console</a>
<li><a href="authentication.html">Authentication</a>
<li><a href="authorization.html">Authorization</a>
<li><a href="billing.html">Laravel Cashier</a>
<li><a href="blade.html">Blade Templates</a>
<li><a href="cache.html">Cache</a>
<li><a href="collections.html">Collections</a>
<li><a href="configuration.html">Configuration</a>
<li><a href="container.html">Service Container</a>
<li><a href="contracts.html">Contracts</a>
<li><a href="contributing.html">Contribution Guidelines</a>
<li><a href="contributions.html">Contribution Guide</a>
<li><a href="controllers.html">HTTP Controllers</a>
<li><a href="database.html">Database: Getting Started</a>
<li><a href="documentation.html">Prologue</a>
<li><a href="elixir.html">Laravel Elixir</a>
<li><a href="eloquent-collections.html">Eloquent: Collections</a>
<li><a href="eloquent-mutators.html">Eloquent: Mutators</a>
<li><a href="eloquent-relationships.html">Eloquent: Relationships</a>
<li><a href="eloquent-serialization.html">Eloquent: Serialization</a>
<li><a href="eloquent.html">Eloquent: Getting Started</a>
<li><a href="encryption.html">Encryption</a>
<li><a href="envoy.html">Envoy Task Runner</a>
<li><a href="errors.html">Errors & Logging</a>
<li><a href="events.html">Events
</a>
<li><a href="facades.html">Facades</a>
<li><a href="filesystem.html">Filesystem / Cloud Storage</a>
<li><a href="hashing.html">Hashing</a>
<li><a href="helpers.html">Helper Functions</a>
<li><a href="homestead.html">Laravel Homestead</a>
<li><a href="installation.html">Installation</a>
<li><a href="lifecycle.html">Request Lifecycle</a>
<li><a href="localization.html">Localization</a>
<li><a href="mail.html">Mail
</a>
<li><a href="middleware.html">HTTP Middleware</a>
<li><a href="migrations.html">Database: Migrations</a>
<li><a href="packages.html">Package Development</a>
<li><a href="pagination.html">Pagination</a>
<li><a href="providers.html">Service Providers</a>
<li><a href="queries.html">Database: Query Builder</a>
<li><a href="queues.html">Queues</a>
<li><a href="quickstart-intermediate.html">Intermediate Task List</a>
<li><a href="quickstart.html">Basic Task List</a>
<li><a href="readme.html">Laravel Documentation</a>
<li><a href="redis.html">Redis</a>
<li><a href="releases.html">Release Notes</a>
<li><a href="requests.html">HTTP Requests</a>
<li><a href="responses.html">HTTP Responses</a>
<li><a href="routing.html">HTTP Routing</a>
<li><a href="scheduling.html">Task Scheduling</a>
<li><a href="seeding.html">Database: Seeding</a>
<li><a href="session.html">Session</a>
<li><a href="structure.html">Application Structure</a>
<li><a href="testing.html">Testing</a>
<li><a href="upgrade.html">Upgrade Guide</a>
<li><a href="valet.html">Laravel Valet</a>
<li><a href="validation.html">Validation
</a>
<li><a href="views.html">Views</a>
</ul></aside><article>
<h1 id="errors-logging">Errors &amp; Logging</h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#the-exception-handler">The Exception Handler</a>
<ul>
<li><a href="#report-method">Report Method</a></li>
<li><a href="#render-method">Render Method</a></li>
</ul></li>
<li><a href="#http-exceptions">HTTP Exceptions</a>
<ul>
<li><a href="#custom-http-error-pages">Custom HTTP Error Pages</a></li>
</ul></li>
<li><a href="#logging">Logging</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2 id="introduction">Introduction</h2>
<p>When you start a new Laravel project, error and exception handling is already configured for you. In addition, Laravel is integrated with the <a href="https://github.com/Seldaek/monolog">Monolog</a> logging library, which provides support for a variety of powerful log handlers.</p>
<p><a name="configuration"></a></p>
<h2 id="configuration">Configuration</h2>
<h4 id="error-detail">Error Detail</h4>
<p>The amount of error detail your application displays through the browser is controlled by the <code>debug</code> configuration option in your <code>config/app.php</code> configuration file. By default, this configuration option is set to respect the <code>APP_DEBUG</code> environment variable, which is stored in your <code>.env</code> file.</p>
<p>For local development, you should set the <code>APP_DEBUG</code> environment variable to <code>true</code>. In your production environment, this value should always be <code>false</code>.</p>
<h4 id="log-modes">Log Modes</h4>
<p>Out of the box, Laravel supports <code>single</code>, <code>daily</code>, <code>syslog</code> and <code>errorlog</code> logging modes. For example, if you wish to use daily log files instead of a single file, you should simply set the <code>log</code> value in your <code>config/app.php</code> configuration file:</p>
<pre><code>&#39;log&#39; =&gt; &#39;daily&#39;</code></pre>
<p>When using the <code>daily</code> log mode, Laravel will only retain five days of log files by default. If you want to adjust the number of retained files, you may add an optional <code>log_max_files</code> configuration value to your <code>app.php</code> configuration file:</p>
<pre><code>&#39;log_max_files&#39; =&gt; 30</code></pre>
<h4 id="custom-monolog-configuration">Custom Monolog Configuration</h4>
<p>If you would like to have complete control over how Monolog is configured for your application, you may use the application's <code>configureMonologUsing</code> method. You should place a call to this method in your <code>bootstrap/app.php</code> file right before the <code>$app</code> variable is returned by the file:</p>
<pre><code>$app-&gt;configureMonologUsing(function($monolog) {
    $monolog-&gt;pushHandler(...);
});

return $app;</code></pre>
<p>By default, Laravel writes all log levels. In your production environment, you may wish to configure the default log level by adding the <code>log_level</code> option to your <code>app.php</code> configuration file. Laravel will then log all levels greater than or equal to the specified severity level. For example, a default <code>log_level</code> of <code>error</code> will log <strong>error</strong>, <strong>critical</strong>, <strong>alert</strong>, and <strong>emergency</strong> messages:</p>
<pre><code>&#39;log_level&#39; =&gt; env(&#39;APP_LOG_LEVEL&#39;, &#39;debug&#39;),</code></pre>
<p><a name="the-exception-handler"></a></p>
<h2 id="the-exception-handler">The Exception Handler</h2>
<p>All exceptions are handled by the <code>App\Exceptions\Handler</code> class. This class contains two methods: <code>report</code> and <code>render</code>. We'll examine each of these methods in detail.</p>
<p><a name="report-method"></a></p>
<h3 id="the-report-method">The Report Method</h3>
<p>The <code>report</code> method is used to log exceptions or send them to an external service like <a href="https://bugsnag.com">BugSnag</a> or <a href="https://github.com/getsentry/sentry-laravel">Sentry</a>. By default, the <code>report</code> method simply passes the exception to the base class where the exception is logged. However, you are free to log exceptions however you wish.</p>
<p>For example, if you need to report different types of exceptions in different ways, you may use the PHP <code>instanceof</code> comparison operator:</p>
<pre><code>/**
 * Report or log an exception.
 *
 * This is a great spot to send exceptions to Sentry, Bugsnag, etc.
 *
 * @param  \Exception  $e
 * @return void
 */
public function report(Exception $e)
{
    if ($e instanceof CustomException) {
        //
    }

    return parent::report($e);
}</code></pre>
<h4 id="ignoring-exceptions-by-type">Ignoring Exceptions By Type</h4>
<p>The <code>$dontReport</code> property of the exception handler contains an array of exception types that will not be logged. By default, exceptions resulting from 404 errors are not written to your log files. You may add other exception types to this array as needed.</p>
<p><a name="render-method"></a></p>
<h3 id="the-render-method">The Render Method</h3>
<p>The <code>render</code> method is responsible for converting a given exception into an HTTP response that should be sent back to the browser. By default, the exception is passed to the base class which generates a response for you. However, you are free to check the exception type or return your own custom response:</p>
<pre><code>/**
 * Render an exception into an HTTP response.
 *
 * @param  \Illuminate\Http\Request  $request
 * @param  \Exception  $e
 * @return \Illuminate\Http\Response
 */
public function render($request, Exception $e)
{
    if ($e instanceof CustomException) {
        return response()-&gt;view(&#39;errors.custom&#39;, [], 500);
    }

    return parent::render($request, $e);
}</code></pre>
<p><a name="http-exceptions"></a></p>
<h2 id="http-exceptions">HTTP Exceptions</h2>
<p>Some exceptions describe HTTP error codes from the server. For example, this may be a &quot;page not found&quot; error (404), an &quot;unauthorized error&quot; (401) or even a developer generated 500 error. In order to generate such a response from anywhere in your application, use the following:</p>
<pre><code>abort(404);</code></pre>
<p>The <code>abort</code> method will immediately raise an exception which will be rendered by the exception handler. Optionally, you may provide the response text:</p>
<pre><code>abort(403, &#39;Unauthorized action.&#39;);</code></pre>
<p>This method may be used at any time during the request's lifecycle.</p>
<p><a name="custom-http-error-pages"></a></p>
<h3 id="custom-http-error-pages">Custom HTTP Error Pages</h3>
<p>Laravel makes it easy to return custom error pages for various HTTP status codes. For example, if you wish to customize the error page for 404 HTTP status codes, create a <code>resources/views/errors/404.blade.php</code>. This file will be served on all 404 errors generated by your application.</p>
<p>The exception raised by the abort method will be passed to the view as $exception, which allows you to present the user with the error message if needed. e.g.</p>
<pre><code>$exception-&gt;getMessage()</code></pre>
<p>The views within this directory should be named to match the HTTP status code they correspond to.</p>
<p><a name="logging"></a></p>
<h2 id="logging">Logging</h2>
<p>The Laravel logging facilities provide a simple layer on top of the powerful <a href="http://github.com/seldaek/monolog">Monolog</a> library. By default, Laravel is configured to create a log file for your application in the <code>storage/logs</code> directory. You may write information to the logs using the <code>Log</code> <a href="facades.html">facade</a>:</p>
<pre><code>&lt;?php

namespace App\Http\Controllers;

use Log;
use App\User;
use App\Http\Controllers\Controller;

class UserController extends Controller
{
    /**
     * Show the profile for the given user.
     *
     * @param  int  $id
     * @return Response
     */
    public function showProfile($id)
    {
        Log::info(&#39;Showing user profile for user: &#39;.$id);

        return view(&#39;user.profile&#39;, [&#39;user&#39; =&gt; User::findOrFail($id)]);
    }
}</code></pre>
<p>The logger provides the eight logging levels defined in <a href="http://tools.ietf.org/html/rfc5424">RFC 5424</a>: <strong>emergency</strong>, <strong>alert</strong>, <strong>critical</strong>, <strong>error</strong>, <strong>warning</strong>, <strong>notice</strong>, <strong>info</strong> and <strong>debug</strong>.</p>
<pre><code>Log::emergency($error);
Log::alert($error);
Log::critical($error);
Log::error($error);
Log::warning($error);
Log::notice($error);
Log::info($error);
Log::debug($error);</code></pre>
<h4 id="contextual-information">Contextual Information</h4>
<p>An array of contextual data may also be passed to the log methods. This contextual data will be formatted and displayed with the log message:</p>
<pre><code>Log::info(&#39;User failed to login.&#39;, [&#39;id&#39; =&gt; $user-&gt;id]);</code></pre>
<h4 id="accessing-the-underlying-monolog-instance">Accessing The Underlying Monolog Instance</h4>
<p>Monolog has a variety of additional handlers you may use for logging. If needed, you may access the underlying Monolog instance being used by Laravel:</p>
<pre><code>$monolog = Log::getMonolog();</code></pre>
</article>
</body>
</html>
